<div class="movie-details">
  <h2 *ngIf="!editing">{{ movie?.series_title }}</h2>
  <input
    *ngIf="editing"
    type="text"
    [value]="movie.series_title"
    (input)="updateField('series_title', $event)"
    placeholder="Enter movie title"
  />

  <p><strong>Year:</strong>
    <span *ngIf="!editing">{{ movie?.released_year }}</span>
    <input
      *ngIf="editing"
      type="number"
      [value]="movie.released_year"
      (input)="updateField('released_year', $event)"
      placeholder="Enter release year"
    />
  </p>

  <p><strong>Genre:</strong>
    <span *ngIf="!editing">{{ movie?.genre }}</span>
    <input
      *ngIf="editing"
      type="text"
      [value]="movie.genre"
      (input)="updateField('genre', $event)"
      placeholder="Enter genre"
    />
  </p>

  <p><strong>Director:</strong>
    <span *ngIf="!editing">{{ movie?.director }}</span>
    <input
      *ngIf="editing"
      type="text"
      [value]="movie.director"
      (input)="updateField('director', $event)"
      placeholder="Enter director"
    />
  </p>

  <p><strong>Average Rating:</strong> {{ movie.rating || 'No ratings yet' }}</p>

  <button *ngIf="!editing" (click)="toggleEditMode()">Edit Movie</button>
  <button *ngIf="editing" (click)="saveChanges()">Save Changes</button>
  <button *ngIf="editing" (click)="toggleEditMode()">Cancel</button>

  <!-- Formulaire pour noter le film -->
  <label for="rating">Rate this movie:</label>
  <input
    id="rating"
    type="number"
    min="1"
    max="20"
    placeholder="Enter rating between 1 and 20"
    (input)="onRatingInput($event)"
  />
  <button (click)="rateMovie()">Submit Rating</button>

  <!-- Bouton pour supprimer le film -->
  <button (click)="deleteMovie()" class="delete-button">Delete Movie</button>
</div>

<!-- Section des commentaires -->
<div class="comments-section">
  <h3>Comments</h3>

  <!-- Liste des commentaires -->
  <div class="comment" *ngFor="let comment of comments">
    <p><strong>{{ comment.username || 'Anonymous' }}</strong>: {{ comment.content }}</p>
  </div>

  <!-- Formulaire pour ajouter un commentaire -->
  <textarea
    placeholder="Write your comment here..."
    (input)="onCommentInput($event)"
    [value]="newComment"
  ></textarea>
  <button (click)="addComment()">Submit Comment</button>
</div>